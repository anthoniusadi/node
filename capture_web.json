[{"id":"3a7b0a52.32cb72","type":"ui_button","z":"b58a14ca.6c9b6","name":"","group":"dcb09ff2.6e96c8","order":0,"width":0,"height":0,"passthru":false,"label":"Capture Dashboard","tooltip":"","color":"","bgcolor":"","icon":"","payload":"capture","payloadType":"str","topic":"","x":190,"y":200,"wires":[["dc9f1439.6a8c08"]]},{"id":"dc9f1439.6a8c08","type":"function","z":"b58a14ca.6c9b6","name":"Capture Dashboard","func":"var node = this;\nvar path = \"/home/pi/\"; // change this to the desired path\nvar file = path + \"dashboard_capture.png\";\n\nvar command = {payload: {command: \"capture\", filename: file}};\n\n// send command to ui_control node\nnode.send(command);\n\n// wait for ui_control node to respond with captured image\nnode.on(\"input\", function(msg) {\n    if (msg.payload.command === \"capture\") {\n        var data = msg.payload.data;\n        var buffer = new Buffer(data, \"base64\");\n        var fs = require(\"fs\");\n        fs.writeFile(file, buffer, function(err) {\n            if (err) {\n                node.error(\"Error writing file: \" + err);\n            } else {\n                node.log(\"Dashboard captured and saved as \" + file);\n            }\n        });\n    }\n});","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":200,"wires":[[]]},{"id":"dcb09ff2.6e96c8","type":"ui_group","name":"Default","tab":"3d40a78b.17047a","order":1,"disp":true,"width":"6","collapse":false},{"id":"3d40a78b.17047a","type":"ui_tab","name":"Home","icon":"dashboard","order":1,"disabled":false,"hidden":false}]
